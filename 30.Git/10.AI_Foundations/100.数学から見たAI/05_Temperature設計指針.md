# 回答のランダム性（Temperature）設計指針  
― QAチャットにおける確率空間制御 ―

本ドキュメントでは、QAチャットにおける **回答のランダム性（Temperature）** を  
「確率空間」という観点から説明し、なぜ **低ランダム性が必要か** を明確にします。

※ 内部実装・数式・学習アルゴリズムの詳細には触れません。

---

## 結論（先に）

- QAチャットでは **回答のランダム性は低く設定すべき**
- ランダム性は「賢さ」ではなく **確率空間の使い幅**
- QAチャットでは **確率空間を制御し、RAGに記載された内容のみに基づいて回答する安全設計** を採用するのが基本。

---

## 回答のランダム性（Temperature）とは

AIは常に、次に出力する単語（トークン）の候補に確率を割り当て、最も尤もらしいものを選択する

という **確率的処理** を行っています。

Temperature は、

- その確率分布を  
  - **どれだけ尖らせるか**
  - **どれだけ平坦にするか**

を制御するパラメータです。

---

## Temperature の直感的な意味

| Temperature | 状態 | 挙動 |
|---|---|---|
| 低い（0.0〜0.2） | 分布が尖る | 上位候補のみ選ばれる |
| 中間（0.3〜0.5） | 適度に分散 | 表現が多少揺れる |
| 高い（0.7〜1.0） | 分布が平坦 | 想定外の候補が混ざる |

---

## QAチャットでランダム性を上げると何が起きるか

ランダム性を上げると、プロンプト指示に対する指示に遵守しなくなる確率が高まります。

つまり、

- RAGに含まれる事実
- 一般知識
- 文脈補完
- 推測・一般論

これらが **近い確率空間で再競争**するようになります。


結果として、

- 「RAGに書かれていないが、それっぽい回答」
- 「文脈からの推測による補完」
- 「一般論による穴埋め」

が **確率的に選択されやすくなります**。


---

## 本QAチャットの安全設計方針

QAチャットでは、以下の思想を採用するべきだと私は考えています。

- 回答は **RAGに記載された事実のみに基づく**
- 推測・補完・一般論は行わない
- 判断・解釈は人間が行う

この思想を確率的に実現するため、
回答のランダム性（Temperature）を低く設定すべきという設計を行っています。

逆にアイデア発想や、指示に従わないAIを作りたい場合はTempertureを高く設定するのもありです。

---

## Temperature と他要素の関係

| 要素 | 役割 | 確率空間への影響 |
|---|---|---|
| プロンプト | 方向付け | 初期分布を定める |
| Knowledge | 境界固定 | 禁止領域を作る |
| RAG | 事実供給 | 局所的に確率を上げる |
| **Temperature** | 揺らぎ制御 | 空間の使い幅を制限 |

Temperature は、  
**最後の安全弁** にあたります。

---

## 推奨設定（用途別）

### QAチャット（業務・仕様検索）
- **Temperature：0.0〜0.2**
- 再現性・安全性・正確性を最優先

### 技術解説・教育用途
- Temperature：0.3〜0.5
- 表現の揺らぎを許容

### 創作・アイデア出し
- Temperature：0.7以上
- 新規性を重視

---

## 本QAチャットでの結論

本QAチャットでは、

- 回答の正確性
- 再現性
- 安全性

を最優先するため、

> **低い Temperature 設定を採用することが妥当である**

と結論づけます。

---

## 重要な一文（まとめ）

> AIは理解していない。  
> 確率が歪められた空間の中から  
> 最も尤もらしい回答を選んでいるだけである。

---